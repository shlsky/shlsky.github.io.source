---
title: Bloom-Filter概念和原理
date: 2019-02-15 16:44:48
tags: algorithm
---

Bloom Filter是一种空间效率很高的随机数据结构，它利用位数组很简洁地表示一个集合，并能判断一个元素是否属于这个集合。Bloom Filter的这种高效是有一定代价的：在判断一个元素是否属于某个集合时，有可能会把不属于这个集合的元素误认为属于这个集合（false positive）。因此，Bloom Filter不适合那些“零错误”的应用场合。而在能容忍低错误率的应用场合下，Bloom Filter通过极少的错误换取了存储空间的极大节省。

## 

### 集合表示和元素查询

下面我们具体来看Bloom Filter是如何用位数组表示集合的。初始状态时，Bloom Filter是一个包含m位的位数组，每一位都置为0。

![img](data:image/jpeg;base64,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)



为了表达S={x1, x2,…,xn}这样一个n个元素的集合，Bloom Filter使用k个相互独立的哈希函数（Hash Function），它们分别将集合中的每个元素映射到{1,…,m}的范围中。对任意一个元素x，第i个哈希函数映射的位置hi(x)就会被置为1（1≤i≤k）。注意，如果一个位置多次被置为1，那么只有第一次会起作用，后面几次将没有任何效果。在下图中，k=3，且有两个哈希函数选中同一个位置（从左边数第五位）。   

![img](/Users/songhongling/github/shlsky.github.io.source/source/_posts/Bloom-Filter概念和原理/Sat Feb 16 2019 20:42:12 GMT+0800 (CST).png)

 



在判断y是否属于这个集合时，我们对y应用k次哈希函数，如果所有hi(y)的位置都是1（1≤i≤k），那么我们就认为y是集合中的元素，否则就认为y不是集合中的元素。下图中y1就不是集合中的元素。y2或者属于这个集合，或者刚好是一个false positive。

![img](data:image/jpeg;base64,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)



## 

### 错误率估计

前面我们已经提到了，Bloom Filter在判断一个元素是否属于它表示的集合时会有一定的错误率（false positive rate），下面我们就来估计错误率的大小。在估计之前为了简化模型，我们假设kn<m且各个哈希函数是完全随机的。当集合S={x1, x2,…,xn}的所有元素都被k个哈希函数映射到m位的位数组中时，这个位数组中某一位还是0的概率是：

![img](data:image/jpeg;base64,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)



其中1/m表示任意一个哈希函数选中这一位的概率（前提是哈希函数是完全随机的），(1-1/m)表示哈希一次没有选中这一位的概率。要把S完全映射到位数组中，需要做kn次哈希。某一位还是0意味着kn次哈希都没有选中它，因此这个概率就是（1-1/m）的kn次方。令p = e-kn/m是为了简化运算，这里用到了计算e时常用的近似：

![img](data:image/jpeg;base64,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)

 



令ρ为位数组中0的比例，则ρ的数学期望E(ρ)= p’。在ρ已知的情况下，要求的错误率（false positive rate）为：

![img](data:image/jpeg;base64,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)



(1-ρ)为位数组中1的比例，(1-ρ)k就表示k次哈希都刚好选中1的区域，即false positive rate。上式中第二步近似在前面已经提到了，现在来看第一步近似。p’只是ρ的数学期望，在实际中ρ的值有可能偏离它的数学期望值。M. Mitzenmacher已经证明[2] ，位数组中0的比例非常集中地分布在它的数学期望值的附近。因此，第一步的近似得以成立。分别将p和p’代入上式中，得：

   

![img](data:image/jpeg;base64,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)

   

![img](data:image/jpeg;base64,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)





相比p’和f’，使用p和f通常在分析中更为方便。

## 

### 最优的哈希函数个数

既然Bloom Filter要靠多个哈希函数将集合映射到位数组中，那么应该选择几个哈希函数才能使元素查询时的错误率降到最低呢？这里有两个互斥的理由：如果哈希函数的个数多，那么在对一个不属于集合的元素进行查询时得到0的概率就大；但另一方面，如果哈希函数的个数少，那么位数组中的0就多。为了得到最优的哈希函数个数，我们需要根据上一小节中的错误率公式进行计算。

 

先用p和f进行计算。注意到f = exp(k ln(1 − e−kn/m))，我们令g = k ln(1 − e−kn/m)，只要让g取到最小，f自然也取到最小。由于p = e-kn/m，我们可以将g写成

![img](data:image/jpeg;base64,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)



根据对称性法则可以很容易看出当p = 1/2，也就是k = ln2· (m/n)时，g取得最小值。在这种情况下，最小错误率f等于(1/2)k ≈ (0.6185)m/n。另外，注意到p是位数组中某一位仍是0的概率，所以p = 1/2对应着位数组中0和1各一半。换句话说，要想保持错误率低，最好让位数组有一半还空着。

 

需要强调的一点是，p = 1/2时错误率最小这个结果并不依赖于近似值p和f。同样对于f’ = exp(k ln(1 − (1 − 1/m)kn))，g’ = k ln(1 − (1 − 1/m)kn)，p’ = (1 − 1/m)kn，我们可以将g’写成

![img](data:image/jpeg;base64,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)



同样根据对称性法则可以得到当p’ = 1/2时，g’取得最小值。

## 

### 位数组的大小

下面我们来看看，在不超过一定错误率的情况下，Bloom Filter至少需要多少位才能表示全集中任意n个元素的集合。假设全集中共有u个元素，允许的最大错误率为є，下面我们来求位数组的位数m。

 

假设X为全集中任取n个元素的集合，F(X)是表示X的位数组。那么对于集合X中任意一个元素x，在s = F(X)中查询x都能得到肯定的结果，即s能够接受x。显然，由于Bloom Filter引入了错误，s能够接受的不仅仅是X中的元素，它还能够є (u - n)个false positive。因此，对于一个确定的位数组来说，它能够接受总共n + є (u - n)个元素。在n + є (u - n)个元素中，s真正表示的只有其中n个，所以一个确定的位数组可以表示

![img](data:image/jpeg;base64,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)



个集合。m位的位数组共有2m个不同的组合，进而可以推出，m位的位数组可以表示

   

![img](data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QAWRXhpZgAASUkqAAgAAAAAAAAAAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAAsAIgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD3+iori4htLd57iRY4kGWdjgAVQTxJosmmpqK6pamzdxGJvMAXcTjHsaANSo554ra3knmcJFGpZmPYCs638S6Ld3UNtb6lbyTzM6xorcsV+8PqKoeJnN5qGj6IMmO8uDJcYxzFGN5UjuGIVT9aANfTLq4vbQXM8PkLKd0UZ++E7FvQnrjtV2ua8Ww3U7aVFaTTxzSXiKGiYqEXq7HHXCg4B4yaj8KyRJq2t2kD3RiiuMbJnd/LIAydzE/eJzgccdqAOmkljhTfI6oucZY45p9cn4ifxOBILe20Y2YlTymluJRIeRjICY/WtvSm1lkk/tiKwjbI8v7HK7gjvncooA0aqWN8t/5skIBt1cosmfvkcEj2z3ridBn1O78U6idTkiN9GZfJiW4mDQx9EBjwIyCOd2SeanugifDC3eF54okjXd9mZkI+fBbK8gDk8enNAHdUVyvh7V5NQ8RanF58slvEkSwBlIym3PmHIwdxJxjsK0NRk8UC8caZbaO9rgbWubiVXJxzkKhH60AbVFZ+lNrDRSf2xFYxybvkFnI7gj33KOa4fWreYW/iq6mutSigikjjgdJJAFlIXMwAOdqFhwPlwhyDQB3xvQmpLZSLtMiF4mzw+PvD2IyPwNQWWotLfT6fdII7uEBxj7ssZ6Ov5YI7H8KyNTkmuLnwnJD5pY3m6QsMMY/IkySPrtp/i2U6YdL1tMg2t3HDNgfehlYRsPoGKN/wGgDpaKKKAM3XbG1vtNxeXEtvDBIlwZIm2kbDuH4cVzWjeGWvf7cmvx9mOqagl59l2hikQCqAwPQuEO72OK6vU9LsdZsXstRt0uLZyC0b5wcHI6UzS9G07RYXh061S3jdtzBSTk4xnmgDP/4RdEu47mG8eKT7a93MyxrmUldgU+mFwAfaqV0xb4r6chPCaPOwHuZYx/SusrltXjW08f8Ah/UG34nhnsSQPlBIEi5/FCPxoA6miiigBskaSrtkUMuc4Ip1FFABVWzsVsmnETnypXMgjI4Qnrj2J5xVqsC98XWVnf3Vj9lvp7mCLzRHDECZFBwxXJH3Twc49s0Ab9FQ2d1HfWcN1Dny5kDruGDgjvU1ABRRRQBVNijakL6Ri8iIY4lPRAfvY9zgflWJ8QWMfgDW5FOHjtmdT6MvIP5iulrmvHYM/heSwWPzHv54bQJnqHcbvyXcfwoA6G3YtbRMepQH9KKeqhVCjoBgUUALRRRQAVma9pbarphiiYJdROs1vIf4JVOVP0zWnRQBT0y/F/aB2Typ0OyeEnmNx1H+B7irlFFABRRRQAVgXPh2W4vtZu/tah762W3gzF/qVAO4HnLAsc9q36KAKmmWktlp0FvNKsskaBWZF2rwOijJwPQZNW6KKACiiigArBEB1vxBBeMP9A04sYCQMSzEbS49lXIB7lj6Ct6jpQAUUUUAf//Z)



个集合。全集中n个元素的集合总共有

   

![img](data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QAWRXhpZgAASUkqAAgAAAAAAAAAAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAAuACQDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD32SRIYmkkYIiAszE4AFV7C8+32ouVjZIpOYt3BZezY7Z6/SsjxLI13d6Xoaglb6YtcYPSGMbmz7E7V/4FS+JLi4tZdM8m/wDscb3SI33QGHcNuGMYzwMHOOaANXUb7+zrU3LxM8KHMpTkovdsdwO9WUdZY1kRgyMAysOhB71g+F9aOvW9/O08U0X2qRIVQfdiBwu73OCce9J4YmeCXVNFkJJ0642xEj/li43oM98A4z7UAdDRRRQBylx+8+K9gp6RaNO4+pmjH9K6W5tbe8i8q6ginjyDslQMMjocGudv4zb/ABJ0e7LAR3FhcWgyerBkkA/JW/Ktu/1jT9MlgjvbpIGnYrHvzgnGevb8aALENtBb7/Ihji8xi77FC7mPUnHU+9czaOY/inqcIPySaVbykf7QkkXP5Y/Kt7TNXsdZt3nsJvNjRzG2UZCrDsQwBrD0xBc/EbXrtXDLbWltZkejfNIf0daAOpooooAxvEmnz3llDc2Sq19YzLc26nA3kdUz23KSufeq1/Zr4ll0W7gWB7COfz5/MyH+QEooHqHxkH0roqZHDFCXMcaoZG3PtGNx9T70AYFiLrQ4dVvdT8rY87SR+U5dpc/d6gYPRQvP1q34d0+aysHlux/pt3K1xcc52s38P0AwPwrUkhilZGkjVzG25CwztPqKfQAUUUUAf//Z)



个，因此要让m位的位数组能够表示所有n个元素的集合，必须有

   

![img](data:image/jpeg;base64,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)



即：

   

![img](data:image/jpeg;base64,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)



上式中的近似前提是n和єu相比很小，这也是实际情况中常常发生的。根据上式，我们得出结论：在错误率不大于є的情况下，m至少要等于n log2(1/є)才能表示任意n个元素的集合。

 





上一小节中我们曾算出当k = ln2· (m/n)时错误率f最小，这时f = (1/2)k = (1/2)mln2 / n。现在令f≤є，可以推出

![img](data:image/jpeg;base64,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)



这个结果比前面我们算得的下界n log2(1/є)大了log2 e ≈ 1.44倍。这说明在哈希函数的个数取到最优时，要让错误率不超过є，m至少需要取到最小值的1.44倍。

## 

### 总结

在计算机科学中，我们常常会碰到时间换空间或者空间换时间的情况，即为了达到某一个方面的最优而牺牲另一个方面。Bloom Filter在时间空间这两个因素之外又引入了另一个因素：错误率。在使用Bloom Filter判断一个元素是否属于某个集合时，会有一定的错误率。也就是说，有可能把不属于这个集合的元素误认为属于这个集合（False Positive），但不会把属于这个集合的元素误认为不属于这个集合（False Negative）。在增加了错误率这个因素之后，Bloom Filter通过允许少量的错误来节省大量的存储空间。

 



自从Burton Bloom在70年代提出Bloom Filter之后，Bloom Filter就被广泛用于拼写检查和数据库系统中。近一二十年，伴随着网络的普及和发展，Bloom Filter在网络领域获得了新生，各种Bloom Filter变种和新的应用不断出现。可以预见，随着网络应用的不断深入，新的变种和应用将会继续出现，Bloom Filter必将获得更大的发展。