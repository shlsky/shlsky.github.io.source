---
title: 正则表达式之捕获组/非捕获组
date: 2018-01-30 14:54:11
tag: 正则表达式
---

## 一、捕获组语法

| **字符**                                   | **描述**                                       | **示例**                          |
| ------------------------------------------ | ---------------------------------------------- | --------------------------------- |
| (*pattern*)                                | 匹配pattern并捕获结果，自动设置组号。          | `(abc)+d匹配abcd或者abcabcd`      |
| (?<*name*>*pattern*)或(?'*name*'*pattern*) | 匹配pattern并捕获结果，设置name为组名。        |                                   |
| \num                                       | 对捕获组的反向引用。其中 num 是一个正整数。    | `(\w)(\w)\2\1匹配abba             |
| \k< *name* > 或\k' *name* '                | 对命名捕获组的反向引用。其中 name 是捕获组名。 | (?<group>\w)abc\k<group>匹配xabcx |

使用小括号指定一个子表达式后，匹配这个子表达式的文本(也就是此分组捕获的内容)可以在表达式或其它程序中作进一步的处理。默认情况下，每个捕获组会自动拥有一个组号，规则是：从左向右，以分组的左括号为标志，第一个出现的分组的组号为1，第二个为2，以此类推。

例如：模式串：http://www.baidu.com:8080/index.html#  

正则表达式`(\w+):\/\/([^/:]+)(:\d+)?([^#:]*) `从左至右有四个组，序号分别是1，2，3，4

## 二、非捕获组语法

| **字符**       | **描述**                         | **示例**                                                     |
| -------------- | -------------------------------- | ------------------------------------------------------------ |
| (?:*pattern*)  | 匹配pattern，但不捕获匹配结果。  | ```industr(?:y｜es)匹配industry'或'industries'。```          |
| (?=*pattern*)  | 零宽度正向预查，不捕获匹配结果。 | ```Windows (?=95｜98｜NT｜2000)匹配 "Windows2000" 中的 "Windows"不匹配 "Windows3.1" 中的 "Windows"。``` |
| (?!*pattern*)  | 零宽度负向预查，不捕获匹配结果。 | ```'Windows (?!95｜98｜NT｜2000)'匹配 "Windows3.1" 中的 "Windows"不匹配 "Windows2000" 中的 "Windows"。``` |
| (?<=*pattern*) | 零宽度正向回查，不捕获匹配结果。 | ```'2000 (?<=Office｜Word｜Excel)'匹配 " Office2000" 中的 "2000"不匹配 "Windows2000" 中的 "2000"。``` |
| (?<!*pattern*) | 零宽度负向回查，不捕获匹配结果。 | ```'2000 (?<!Office｜Word｜Excel)'匹配 " Windows2000" 中的 "2000"不匹配 " Office2000" 中的 "2000"。``` |

非捕获组只匹配结果，但不捕获结果，也不会分配组号，当然也不能在表达式和程序中做进一步处理。

首先(?:pattern)与(pattern)不同之处只是在于不捕获结果。接下来的四个非捕获组用于匹配pattern（或者不匹配pattern）位置之前（或之后）的内容。匹配的结果不包括pattern。

​      例如：

(?<=<(\w+)>).*(?=<\/\1>)匹配不包含属性的简单HTML标签内的内容。如：<div>hello</div>之中的hello，匹配结果不包括前缀<div>和后缀</div>。

## 三、注释

| **字符**      | **描述**                                        | **示例**                                                     |
| ------------- | ----------------------------------------------- | ------------------------------------------------------------ |
| (?#*comment*) | comment是注释，不对正则表达式的处理产生任何影响 | ```2[0-4]\d(?#200-249)｜25[0-5](?#250-255)｜1?\d\d?(?#0-199)匹配0-255的整数`` |